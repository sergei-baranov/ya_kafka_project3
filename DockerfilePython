FROM python:3.12

# trixie
RUN apt-get update && apt-get install -y supervisor
# alpine
# RUN apk update && apk add --no-cache supervisor

COPY ./supervisord.conf /etc/supervisord.conf

WORKDIR /app
COPY ./app/ /app/
RUN pip install -r requirements.txt

# see docker-compose stdin_open: true, tty: true
# CMD ["bash"]

ENTRYPOINT ["supervisord", "-c", "/etc/supervisord.conf"]
